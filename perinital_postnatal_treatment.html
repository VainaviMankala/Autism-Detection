<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Autism Evaluation Platform</title>  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">  
  <style>  
    .logo-container {  
      text-align: center;  
      margin-bottom: 20px;  
    }  
    .language-selector {  
      position: absolute;  
      top: 10px;  
      right: 20px;  
    }  
    .section {  
      padding: 20px;  
      background-color: #f7f7f7;  
      border: 1px solid #ddd;  
      margin-bottom: 20px;  
      border-radius: 10px;  
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);  
    }  
  </style>  
  <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>  
  <script>  
    function googleTranslateElementInit() {  
      new google.translate.TranslateElement({  
        pageLanguage: 'en',  
        includedLanguages: 'en,hi,te', // English, Hindi, Telugu  
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE  
      }, 'google_translate_element');  
    }  
  </script>  
</head>  
<body>  
  <!-- Language Selector -->  
  <div class="language-selector" id="google_translate_element"></div>  
  
  <!-- Logo Section -->  
  <div class="logo-container">  
    <img src="GNITS_Logo.jpeg" alt="GNITS Logo" style="max-width: 150px; margin-right: 20px;">  
    <img src="Ignitio logo.jpg" alt="Ignito Logo" style="max-width: 150px;">  
  </div>  
  
  <!-- Form Content -->  
  <div class="container mt-5">  
    <form id="evaluationForm">  
      <!-- Page 1: Identification Details -->  
      <div class="section">  
        <h2>Perinital Details</h2>  
        <div class="mb-3">  
           <label class="form-label">Nature of Delivery</label><br>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="deliveryNature" value="Forceps" required>  
              <label class="form-check-label">Forceps</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="deliveryNature" value="Suction" required>  
              <label class="form-check-label">Suction</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="deliveryNature" value="LSCS" required>  
              <label class="form-check-label">LSCS</label>  
           </div>  
        </div>  
  
          
        <div class="mb-3">  
           <label class="form-label">Premature/FTND</label><br>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="premature" value="Premature" required>  
              <label class="form-check-label">Premature</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="premature" value="FTND" required>  
              <label class="form-check-label">FTND</label>  
           </div>  
        </div>  
  
  
        <div class="mb-3">  
           <label for="prolongedLabor" class="form-label">Prolonged labor/Asphyxia</label>  
           <input type="text" class="form-control" id="prolongedLabor">  
        </div>  
  
  
        <div class="mb-3">  
           <label class="form-label">Birth Cry</label><br>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="birthCry" value="P/A" required>  
              <label class="form-check-label">P/A</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="birthCry" value="Loudness" required>  
              <label class="form-check-label">Loudness</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="birthCry" value="Delayed" required>  
              <label class="form-check-label">Delayed</label>  
           </div>  
        </div>  
  
  
        <div class="mb-3">  
           <label for="birthWeight" class="form-label">Birth Weight</label>  
           <input type="number" class="form-control" id="birthWeight" required>  
        </div>  
  
  
        <div class="mb-3">  
           <label for="complicationDuringBirth" class="form-label">Any Complication during Birth</label>  
           <textarea class="form-control" id="complicationDuringBirth" rows="3"></textarea>  
        </div>  
  
  
      <!-- Page 2: Parental Details -->  
      <div class="section">  
        <h2>Postnatal History</h2>  
        <div class="mb-3">  
           <label for="infections" class="form-label">Any Infections</label>  
           <textarea class="form-control" id="infections" rows="3" placeholder="Enter details of infections" required></textarea>  
        </div>  
  
  
        <div class="mb-3">  
           <label class="form-label">Breast Feed (Y/N)</label><br>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="breastFeed" value="Yes" required>  
              <label class="form-check-label">Yes</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="breastFeed" value="No" required>  
              <label class="form-check-label">No</label>  
           </div>  
        </div>  
  
  
        <div class="mb-3">  
           <label class="form-label">Head Injury / Trauma</label><br>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="headInjuryTrauma" value="Head Injury" required>  
              <label class="form-check-label">Head Injury</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="headInjuryTrauma" value="Trauma" required>  
              <label class="form-check-label">Trauma</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="headInjuryTrauma" value="None" required>  
              <label class="form-check-label">None</label>  
           </div>  
        </div>  
  
  
        <div class="mb-3">  
           <label for="epilepsy" class="form-label">Epilepsy</label>  
           <input type="text" class="form-control" id="epilepsy" placeholder="Enter details of epilepsy" required>  
        </div>  
  
  
        <div class="mb-3">  
           <label class="form-label">Fever / Jaundice</label><br>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="feverJaundice" value="Fever" required>  
              <label class="form-check-label">Fever</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="feverJaundice" value="Jaundice" required>  
              <label class="form-check-label">Jaundice</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="feverJaundice" value="None" required>  
              <label class="form-check-label">None</label>  
           </div>  
        </div>  
  
        <div class="mb-3">  
           <label for="ageOfDisability" class="form-label">Age of child when disability was noticed</label>  
           <input type="number" class="form-control" id="ageOfDisability" placeholder="Enter age" required>  
        </div>  
  
      </div>  
  
      <!-- Page 3: Prenatal Details -->  
      <div class="section">  
        <h2>Treatment and Medical History</h2>  
        <div class="mb-3">  
           <label for="illnessInjuries" class="form-label">Illness/Injuries</label>  
           <textarea class="form-control" id="illnessInjuries" rows="3" placeholder="Enter details of any illness or injuries"></textarea>  
        </div>  
  
        <!-- Convulsions with Radio Buttons -->  
        <div class="mb-3">  
           <label class="form-label">Convulsions</label><br>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="convulsions" id="convulsionsYes" value="Yes">  
              <label class="form-check-label" for="convulsionsYes">Yes</label>  
           </div>  
           <div class="form-check">  
              <input class="form-check-input" type="radio" name="convulsions" id="convulsionsNo" value="No">  
              <label class="form-check-label" for="convulsionsNo">No</label>  
           </div>  
        </div>  
  
        <!-- Ear Aches / Discharge (textarea input) -->  
        <div class="mb-3">  
           <label for="earAches" class="form-label">Ear Aches/Discharge</label>  
           <textarea class="form-control" id="earAches" rows="3" placeholder="Enter details of ear aches or discharge"></textarea>  
        </div>  
  
        <!-- Any other (textarea input) -->  
        <div class="mb-3">  
           <label for="anyOtherMedical" class="form-label">Any other</label>  
           <textarea class="form-control" id="anyOtherMedical" rows="3" placeholder="Enter other medical details"></textarea>  
        </div>  
      </div>  
      <!-- Navigation Buttons -->  
      <div class="d-flex justify-content-between">  
        <a href="educational_family_play.html" class="btn btn-secondary">Previous</a>  
        <button type="button" class="btn btn-primary" onclick="window.location.href='Behavioural_selfhelp_prevdiagnosis.html';">Submit</button>
    </div>  
    </form>  
  </div>  
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>  
  
  <script type="module">  
    // Firebase setup  
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";  
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";  
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";  
   
    const firebaseConfig = {  
       apiKey: "AIzaSyC_8gFPJrjBhjs4Zj5YDyYcoZQjfl6Amr0",  
       authDomain: "autism-evaluation-platform.firebaseapp.com",  
       projectId: "autism-evaluation-platform",  
       storageBucket: "autism-evaluation-platform.appspot.com",  
       messagingSenderId: "748226978662",  
       appId: "1:748226978662:web:cddef872e6bfc1fb131ea7",  
       measurementId: "G-1TGEHTTJF4"  
    };  
   
    // Initialize Firebase  
    const app = initializeApp(firebaseConfig);  
    const db = getFirestore(app);  
    const auth = getAuth();  
   
    // Form submission logic  
    async function handleSubmit(event) {  
       event.preventDefault(); // Prevent default form submission  
   
       // Gather form data  
       const formData = {  
          perinatalDetails: {  
            deliveryNature: document.querySelector('input[name="deliveryNature"]:checked')?.value || '',  
            premature: document.querySelector('input[name="premature"]:checked')?.value || '',  
            prolongedLabor: document.getElementById('prolongedLabor')?.value || '',  
            birthCry: document.querySelector('input[name="birthCry"]:checked')?.value || '',  
            birthWeight: document.getElementById('birthWeight')?.value || '',  
            complicationDuringBirth: document.getElementById('complicationDuringBirth')?.value || '',  
          },  
          postnatalHistory: {  
            infections: document.getElementById('infections')?.value || '',  
            breastFeed: document.querySelector('input[name="breastFeed"]:checked')?.value || '',  
            headInjuryTrauma: document.querySelector('input[name="headInjuryTrauma"]:checked')?.value || '',  
            epilepsy: document.getElementById('epilepsy')?.value || '',  
            feverJaundice: document.querySelector('input[name="feverJaundice"]:checked')?.value || '',  
            ageOfDisability: document.getElementById('ageOfDisability')?.value || '',  
          },  
          treatmentAndMedicalHistory: {  
            illnessInjuries: document.getElementById('illnessInjuries')?.value || '',  
            convulsions: document.querySelector('input[name="convulsions"]:checked')?.value || '',  
            earAches: document.getElementById('earAches')?.value || '',  
            anyOtherMedical: document.getElementById('anyOtherMedical')?.value || '',  
          }  
       };  
   
       // Ensure the user is authenticated  
       onAuthStateChanged(auth, async (user) => {  
          if (user) {  
            try {  
               // Save each object as a separate document in Firestore  
               await setDoc(  
                  doc(db, `users/${user.uid}/casehistory/perinatalDetails`),  
                  formData.perinatalDetails  
               );  
               await setDoc(  
                  doc(db, `users/${user.uid}/casehistory/postnatalHistory`),  
                  formData.postnatalHistory  
               );  
               await setDoc(  
                  doc(db, `users/${user.uid}/casehistory/treatmentAndMedicalHistory`),  
                  formData.treatmentAndMedicalHistory  
               );  
   
               // Redirect after successful submission, if needed  
               window.location.href = 'educational_family_play.html'; // Update this URL as necessary  
            } catch (error) {  
               console.error("Error submitting form:", error);  
               alert("There was an error submitting the form. Please try again.");  
            }  
          } else {  
            alert("User not authenticated. Please log in.");  
          }  
       });  
    }  
   
    // Attach form submission handler  
    document.addEventListener("DOMContentLoaded", () => {  
       const form = document.getElementById('evaluationForm');  
       if (form) {  
          form.addEventListener('submit', handleSubmit);  
       } else {  
          console.error("Form with ID 'evaluationForm' not found.");  
       }  
    });  
  </script>  
</body>  
</html>
