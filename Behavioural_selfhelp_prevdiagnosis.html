<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Autism Evaluation Platform</title>  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">  
  <style>  
    .logo-container {  
      text-align: center;  
      margin-bottom: 20px;  
    }  
    .language-selector {  
      position: absolute;  
      top: 10px;  
      right: 20px;  
    }  
    .section {  
      padding: 20px;  
      background-color: #f7f7f7;  
      border: 1px solid #ddd;  
      margin-bottom: 20px;  
      border-radius: 10px;  
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);  
    }  
  </style>  
  <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>  
  <script>  
    function googleTranslateElementInit() {  
      new google.translate.TranslateElement({  
        pageLanguage: 'en',  
        includedLanguages: 'en,hi,te', // English, Hindi, Telugu  
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE  
      }, 'google_translate_element');  
    }  
  </script>  
</head>  
<body>  
  <!-- Language Selector -->  
  <div class="language-selector" id="google_translate_element"></div>  
  
  <!-- Logo Section -->  
  <div class="logo-container">  
    <img src="GNITS_Logo.jpeg" alt="GNITS Logo" style="max-width: 150px; margin-right: 20px;">  
    <img src="Ignitio logo.jpg" alt="Ignito Logo" style="max-width: 150px;">  
  </div>  
  
  <!-- Form Content -->  
  <div class="container mt-5">  
    <form id="evaluationForm">  
      <!-- Page 1: Identification Details -->  
      <div class="section">  
        <h2>Behavioural History</h2>  
        <div class="mb-3">  
           <label for="behave" class="form-label">Behaviour in Infancy and Toddlerhood</label>  
           <textarea class="form-control" id="behave" rows="1" placeholder=""></textarea>  
        </div>  
        <div class="mb-3">  
           <label for="homebehaviour" class="form-label">Home Behaviour</label>  
           <textarea class="form-control" id="homebehaviour" rows="1" placeholder=""></textarea>  
        </div>  
        <div class="mb-3">  
           <label for="socialbehaviour" class="form-label">Social Behaviour</label>  
           <textarea class="form-control" id="socialbehaviour" rows="1" placeholder=""></textarea>  
        </div>  
        <div class="mb-3">  
           <label for="differentbeh" class="form-label">Differential Behaviours</label>  
           <textarea class="form-control" id="differentbeh" rows="1" placeholder=""></textarea>  
        </div>  
        <h2>Higher Function</h2>  
        <div class="mb-3">  
           <label for="vision" class="form-label">Vision</label>  
           <textarea class="form-control" id="vision" rows="1" placeholder=""></textarea>  
        </div>  
        <div class="mb-3">  
           <label for="hearing" class="form-label">Hearing</label>  
           <textarea class="form-control" id="hearing" rows="1" placeholder=""></textarea>  
        </div>  
        <div class="mb-3">  
           <label for="speech" class="form-label">Speech</label>  
           <textarea class="form-control" id="speech" rows="1" placeholder=""></textarea>  
        </div>  
        <div class="mb-3">  
           <label for="orientation" class="form-label">Orientation</label>  
           <textarea class="form-control" id="orientation" rows="1" placeholder="Enter Details in the format (Time/Place/Person)"></textarea>  
        </div>  
  
      </div>  
  
      <!-- Page 2: Parental Details -->  
      <div class="section">  
        <h2>Self-Help Skills</h2>  
        <div class="form-group row align-items-center">  
           <label class="col-form-label col-md-3 skill-label">Eating:</label>  
           <div class="col-md-9">  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="eating" id="eating1" value="independent">  
                <label class="form-check-label" for="eating1">Independent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="eating" id="eating2" value="semi-dependent">  
                <label class="form-check-label" for="eating2">Semi-dependent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="eating" id="eating3" value="fully-dependent">  
                <label class="form-check-label" for="eating3">Fully dependent</label>  
              </div>  
           </div>  
        </div>  
    
        <!-- Bathing -->  
        <div class="form-group row align-items-center">  
           <label class="col-form-label col-md-3 skill-label">Bathing:</label>  
           <div class="col-md-9">  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="bathing" id="bathing1" value="independent">  
                <label class="form-check-label" for="bathing1">Independent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="bathing" id="bathing2" value="semi-dependent">  
                <label class="form-check-label" for="bathing2">Semi-dependent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="bathing" id="bathing3" value="fully-dependent">  
                <label class="form-check-label" for="bathing3">Fully dependent</label>  
              </div>  
           </div>  
        </div>  
    
        <!-- Grooming -->  
        <div class="form-group row align-items-center">  
           <label class="col-form-label col-md-3 skill-label">Grooming:</label>  
           <div class="col-md-9">  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="grooming" id="grooming1" value="independent">  
                <label class="form-check-label" for="grooming1">Independent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="grooming" id="grooming2" value="semi-dependent">  
                <label class="form-check-label" for="grooming2">Semi-dependent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="grooming" id="grooming3" value="fully-dependent">  
                <label class="form-check-label" for="grooming3">Fully dependent</label>  
              </div>  
           </div>  
        </div>  
    
        <!-- Dressing -->  
        <div class="form-group row align-items-center">  
           <label class="col-form-label col-md-3 skill-label">Dressing (Upper & Lower body):</label>  
           <div class="col-md-9">  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="dressing" id="dressing1" value="independent">  
                <label class="form-check-label" for="dressing1">Independent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="dressing" id="dressing2" value="semi-dependent">  
                <label class="form-check-label" for="dressing2">Semi-dependent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="dressing" id="dressing3" value="fully-dependent">  
                <label class="form-check-label" for="dressing3">Fully dependent</label>  
              </div>  
           </div>  
        </div>  
    
        <!-- Toileting -->  
        <div class="form-group row align-items-center">  
           <label class="col-form-label col-md-3 skill-label">Toileting:</label>  
           <div class="col-md-9">  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="toileting" id="toileting1" value="independent">  
                <label class="form-check-label" for="toileting1">Independent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="toileting" id="toileting2" value="semi-dependent">  
                <label class="form-check-label" for="toileting2">Semi-dependent</label>  
              </div>  
              <div class="form-check form-check-inline">  
                <input class="form-check-input" type="radio" name="toileting" id="toileting3" value="fully-dependent">  
                <label class="form-check-label" for="toileting3">Fully dependent</label>  
              </div>  
           </div>  
        </div>  
        </div>  
        
  
      <!-- Page 3: Prenatal Details -->  
      <div class="section">  
        <h2>Previous Diagnosis & Therapy Details</h2>  
        <div class="mb-3">  
           <label for="prevtherapy" class="form-label">Previous Therapy Details</label>  
           <textarea class="form-control" id="prevtherapy" rows="3" placeholder="Enter previous therapy details..."></textarea>  
        </div>  
  
        <br>  
  
        <!-- Recommendation Section -->  
        <h2>Recommendation</h2>  
  
        <div class="mb-3">  
           <label for="recommend" class="form-label">Recommendation</label>  
           <textarea class="form-control" id="recommend" rows="3" placeholder="Enter your recommendation..."></textarea>  
        </div>  
           
      </div>  
  
      <!-- Navigation Buttons -->  
      <div class="d-flex justify-content-between">  
        <button type="button" class="btn btn-secondary" onclick="window.location.href = 'parent_dashboard_en.html';">OK</button>  
        <button type="button" class="btn btn-primary" onclick="alert('Form Submitted Successfully'); window.location.href='parent_dashboard_en.html';">Submit</button>
    </div>  
    </form>  
  </div>  
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>  
  
  <script type="module">  
    // Firebase setup  
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";  
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js";  
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";  
   
    const firebaseConfig = {  
       apiKey: "AIzaSyC_8gFPJrjBhjs4Zj5YDyYcoZQjfl6Amr0",  
       authDomain: "autism-evaluation-platform.firebaseapp.com",  
       projectId: "autism-evaluation-platform",  
       storageBucket: "autism-evaluation-platform.appspot.com",  
       messagingSenderId: "748226978662",  
       appId: "1:748226978662:web:cddef872e6bfc1fb131ea7",  
       measurementId: "G-1TGEHTTJF4"  
    };  
   
    // Initialize Firebase  
    const app = initializeApp(firebaseConfig);  
    const db = getFirestore(app);  
    const auth = getAuth();  
   
    // Form submission logic  
    async function handleSubmit(event) {  
       event.preventDefault(); // Prevent default form submission  
   
       // Gather form data  
       const formData = {  
          behaviouralHistory: {  
            behave: document.getElementById('behave')?.value || '',  
            homebehaviour: document.getElementById('homebehaviour')?.value || '',  
            socialbehaviour: document.getElementById('socialbehaviour')?.value || '',  
            differentbeh: document.getElementById('differentbeh')?.value || '',  
          },  
          higherFunction: {  
            vision: document.getElementById('vision')?.value || '',  
            hearing: document.getElementById('hearing')?.value || '',  
            speech: document.getElementById('speech')?.value || '',  
            orientation: document.getElementById('orientation')?.value || '',  
          },  
          selfHelpSkills: {  
            eating: document.querySelector('input[name="eating"]:checked')?.value || '',  
            bathing: document.querySelector('input[name="bathing"]:checked')?.value || '',  
            grooming: document.querySelector('input[name="grooming"]:checked')?.value || '',  
            dressing: document.querySelector('input[name="dressing"]:checked')?.value || '',  
            toileting: document.querySelector('input[name="toileting"]:checked')?.value || '',  
          },  
          previousDiagnosisAndTherapyDetails: {  
            prevtherapy: document.getElementById('prevtherapy')?.value || '',  
            recommend: document.getElementById('recommend')?.value || '',  
          }  
       };  
   
       // Ensure the user is authenticated  
       onAuthStateChanged(auth, async (user) => {  
          if (user) {  
            try {  
               // Save each object as a separate document in Firestore  
               await setDoc(  
                  doc(db, `users/${user.uid}/casehistory/behaviouralHistory`),  
                  formData.behaviouralHistory  
               );  
               await setDoc(  
                  doc(db, `users/${user.uid}/casehistory/higherFunction`),  
                  formData.higherFunction  
               );  
               await setDoc(  
                  doc(db, `users/${user.uid}/casehistory/selfHelpSkills`),  
                  formData.selfHelpSkills  
               );  
               await setDoc(  
                  doc(db, `users/${user.uid}/casehistory/previousDiagnosisAndTherapyDetails`),  
                  formData.previousDiagnosisAndTherapyDetails  
               );  
   
               // Redirect after successful submission, if needed  
               window.location.href = 'educational_family_play.html'; // Update this URL as necessary  
            } catch (error) {  
               console.error("Error submitting form:", error);  
               alert("There was an error submitting the form. Please try again.");  
            }  
          } else {  
            alert("User not authenticated. Please log in.");  
          }  
       });  
    }  
   
    // Attach form submission handler  
    document.addEventListener("DOMContentLoaded", () => {  
       const form = document.getElementById('evaluationForm');  
       if (form) {  
          form.addEventListener('submit', handleSubmit);  
       } else {  
          console.error("Form with ID 'evaluationForm' not found.");  
       }  
    });  
  </script>  
</body>  
</html>
